# üåæ CES Token Price Telegram Bot

Telegram –±–æ—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ü–µ–Ω—ã —Ç–æ–∫–µ–Ω–∞ CES –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –≤—ã–≤–æ–¥–∞.

## ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìä –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
```
üí∞ –¶–µ–Ω–∞ —Ç–æ–∫–µ–Ω–∞ CES: $ 3.18 | ‚ÇΩ 256.40
‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ
üîª -3.58% ‚Ä¢ üÖ• $ 1.17M ‚Ä¢ üÖêüÖ£üÖó $ 3.18
```

**–ì–¥–µ:**
- üîª - –ø–∞–¥–µ–Ω–∏–µ —Ü–µ–Ω—ã (–∫—Ä–∞—Å–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞ –≤–Ω–∏–∑)
- üî∫ - —Ä–æ—Å—Ç —Ü–µ–Ω—ã (–∑–µ–ª–µ–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞ –≤–≤–µ—Ä—Ö) 
- üÖ• - —Å—É—Ç–æ—á–Ω—ã–π –æ–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤ (24h Volume)
- üÖêüÖ£üÖó - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è (All Time High)

### ‚ö° –£—Å–∫–æ—Ä–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- –£–±—Ä–∞–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤
- –£–º–µ–Ω—å—à–µ–Ω —Ç–∞–π–º–∞—É—Ç API –∑–∞–ø—Ä–æ—Å–æ–≤ —Å 10 –¥–æ 8 —Å–µ–∫—É–Ω–¥
- –£–±—Ä–∞–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

### üìà –£–º–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ ATH
- ü•á **CoinMarketCap API** - –Ω–∞–¥–µ–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ATH
- üóÑÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ATH –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- üèÜ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ üèÜ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ ATH
- üìä –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö (üÖ≤üÖºüÖ≤ / üóÑÔ∏è)
- üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π ATH –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### üîÑ –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Ü–µ–Ω—ã –≤ –∫–æ–Ω—Å–æ–ª—å
- –£–º–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone <repository-url>
cd Metawhale
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
yarn install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```env
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/ces-bot
CMC_API_KEY=your_coinmarketcap_api_key_here
WEBHOOK_URL=https://your-app-name.onrender.com
PORT=3000
API_CALL_INTERVAL=10000
```

### 4. –ó–∞–ø—É—Å–∫
```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
yarn dev

# –ü—Ä–æ–¥–∞–∫—à–Ω
yarn start
```

## üìã –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `/price` - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É CES —Ç–æ–∫–µ–Ω–∞

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **Telegram Bot API** (—á–µ—Ä–µ–∑ Telegraf)
- **CoinMarketCap API** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Ü–µ–Ω–µ
- **MongoDB** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω
- **Express.js** –¥–ª—è webhook –∏ health endpoints

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- Webhook –≤–º–µ—Å—Ç–æ polling –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- Rate limiting –¥–ª—è CoinMarketCap API
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π self-ping –¥–ª—è Render
- Fallback –Ω–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API

## üîß API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### CoinMarketCap API
–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CoinMarketCap –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ —Ü–µ–Ω–µ –∏ ATH:

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `symbol=CES` - –ø–æ–∏—Å–∫ –ø–æ —Å–∏–º–≤–æ–ª—É —Ç–æ–∫–µ–Ω–∞
- `convert=USD,RUB` - —Ü–µ–Ω—ã –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö –∏ —Ä—É–±–ª—è—Ö
- –†—ã–Ω–æ—á–Ω–∞—è –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤
- –¢–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ATH (All-Time High)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```
CMC_API_KEY=your_coinmarketcap_api_key
```
–ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á: https://coinmarketcap.com/api/

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health endpoints:
- `GET /` - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
- `GET /health` - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–¥–æ—Ä–æ–≤—å–µ
- `GET /ping` - Keep-alive endpoint

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- API –æ—à–∏–±–∫–∏ –∏ fallback –Ω–∞ –∫—ç—à
- Self-ping —Å—Ç–∞—Ç—É—Å

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Render

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Render.com —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –≤ `render.yaml`:

```yaml
services:
  - type: web
    name: metawhale-bot
    env: node
    buildCommand: yarn install
    startCommand: yarn start
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
node test-format.js
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ index.js              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ package.json          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ render.yaml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Render
‚îú‚îÄ‚îÄ .env.example          # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ test-format.js        # –¢–µ—Å—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ webhook –≤–º–µ—Å—Ç–æ long polling
- Rate limiting –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ API
- Graceful shutdown –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞ —Å ATH
–†–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è CoinGecko API, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ATH –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
- üõ† –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ CoinMarketCap API –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è ATH
- üèÜ ATH –≤—Å–µ–≥–¥–∞ = max(CMC ATH, –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π ATH –∏–∑ –ë–î, —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞)
- ‚ôæÔ∏è –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö

### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–æ–≤–æ–≥–æ ATH
–ö–æ–≥–¥–∞ —Ü–µ–Ω–∞ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –º–∞–∫—Å–∏–º—É–º–∞:
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è üèÜ —ç–º–æ–¥–∑–∏ —Ä—è–¥–æ–º —Å ATH
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å "üèÜ –û–±–Ω–∞—Ä—É–∂–µ–Ω –Ω–æ–≤—ã–π ATH!"
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏–∫–∏ ATH:
```bash
yarn test-format
```

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ CoinMarketCap API:
```bash
yarn test-cmc
```

## üîó API –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### ü•á CoinMarketCap API
–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CoinMarketCap –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- üèÜ –¢–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ATH
- üìä –ù–∞–¥–µ–∂–Ω–∞—è —Ä—ã–Ω–æ—á–Ω–∞—è –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è  
- üîÑ –ß–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- üíé –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
–î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```
CMC_API_KEY=your_coinmarketcap_api_key
```
–ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á: https://coinmarketcap.com/api/

---

### ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ—Å–æ–±–µ–Ω–Ω–æ CMC_API_KEY)
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ MongoDB
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å CoinMarketCap API
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è