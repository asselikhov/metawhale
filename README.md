# CES Price Telegram Bot ü§ñ

–¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—ã —Ç–æ–∫–µ–Ω–∞ CES —Å –∫—Ä–∞—Å–∏–≤—ã–º–∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –≤ –≤–∏–¥–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üí∞ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã —Ç–æ–∫–µ–Ω–∞ CES
- üìä –ö—Ä–∞—Å–∏–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã (–∞—Ç—Ç–∞—á –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- üöÄ –ö–æ–º–∞–Ω–¥—ã /start –∏ /price
- üé® –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üíæ –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω –≤ MongoDB
- üåê –ì–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Render
- üîó Webhook —Ä–µ–∂–∏–º (–Ω–µ –∑–∞—Å—ã–ø–∞–µ—Ç –Ω–∞ Render)
- üèì –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π self-ping –∫–∞–∂–¥—ã–µ 14 –º–∏–Ω—É—Ç
- üß∂ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Yarn –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- üá∑üá∫ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ces-price-telegram-bot/
‚îú‚îÄ‚îÄ index.js              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ package.json          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ yarn.lock             # Lockfile –¥–ª—è Yarn
‚îú‚îÄ‚îÄ .env                  # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .gitignore           # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Git
‚îú‚îÄ‚îÄ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ render.yaml          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Render
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞

1. –ù–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/newbot`
3. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ `/setcommands`:
   ```
   price - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É CES —Å –≥—Ä–∞—Ñ–∏–∫–æ–º
   ```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDB

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [MongoDB Atlas](https://www.mongodb.com/atlas)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)
3. –ü–æ–ª—É—á–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
4. –î–æ–±–∞–≤—å—Ç–µ IP-–∞–¥—Ä–µ—Å–∞ Render –≤ whitelist –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 0.0.0.0/0

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª `.env`:

```env
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_botfather
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/ces-bot?retryWrites=true&w=majority
PORT=3000
COINGECKO_API_URL=https://api.coingecko.com/api/v3
CES_CONTRACT_ADDRESS=0x1bdf71ede1a4777db1eebe7232bcda20d6fc1610
NETWORK=polygon
TIMEZONE=Europe/Moscow
API_CALL_INTERVAL=10000
WEBHOOK_URL=https://your-app-name.onrender.com
```

### 4. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
yarn install

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
yarn dev

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–µ
yarn start

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook
yarn test-webhook
```

### 5. –î–µ–ø–ª–æ–π –Ω–∞ Render

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [Render](https://render.com)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Web Service
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ:
   - **Build Command**: `yarn install`
   - **Start Command**: `yarn start`
   - **Environment Variables**: –¥–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env
5. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ!

## ü§ñ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å–ø—Ä–∞–≤–∫—É |
| `/price` | –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É CES —Å –∫—Ä–∞—Å–∏–≤—ã–º –≥—Ä–∞—Ñ–∏–∫–æ–º |

## ü™ô –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –¢–æ–∫–µ–Ω CES
- **–ê–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞**: `0x1bdf71ede1a4777db1eebe7232bcda20d6fc1610`
- **–°–µ—Ç—å**: Polygon
- **–ò—Å—Ç–æ—á–Ω–∏–∫ —Ü–µ–Ω—ã**: CoinGecko API

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω**: –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- **–°–£–ë–î**: MongoDB —Å Mongoose ODM

### –ì—Ä–∞—Ñ–∏–∫–∏
- **–¢–∏–ø**: –ö—Ä–∞—Å–∏–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ —á–µ—Ä–µ–∑ Puppeteer –∏ Chart.js
- **–î–∞–Ω–Ω—ã–µ**: –ü–æ—Å–ª–µ–¥–Ω–∏–µ 24 —Ç–æ—á–∫–∏ —Ü–µ–Ω—ã –∑–∞ —Å—É—Ç–∫–∏
- **–§–æ—Ä–º–∞—Ç**: PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**: –¢—Ä–µ–Ω–¥, –º–∏–Ω–∏–º—É–º, –º–∞–∫—Å–∏–º—É–º, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏

## üåê API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `GET /` - –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞ –∏ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `GET /ping` - Keep-alive endpoint –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞—Å—ã–ø–∞–Ω–∏—è
- `POST /webhook/:token` - Webhook endpoint –¥–ª—è Telegram

## üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –¥–ª—è –Ω–µ—É–¥–∞—á–Ω—ã—Ö API –≤—ã–∑–æ–≤–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ API
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## ‚ö° –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏

- –ó–∞–¥–µ—Ä–∂–∫–∞ 10 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ CoinGecko API
- –°–æ–±–ª—é–¥–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ CoinGecko API
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö 429

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```json
{
  "node-telegram-bot-api": "^0.65.1",  // Telegram Bot API
  "mongoose": "^8.0.3",                // MongoDB ODM
  "axios": "^1.6.2",                   // HTTP –∫–ª–∏–µ–Ω—Ç
  "dotenv": "^16.3.1",                 // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
  "express": "^4.18.2",                // Web —Å–µ—Ä–≤–µ—Ä –¥–ª—è health check
  "puppeteer": "^21.0.0"               // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–∞—Å–∏–≤—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤
}
```

## üöÄ –ó–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `yarn install`
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª**
4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ**: `yarn start`

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

### –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ
üí∞ –¶–µ–Ω–∞ —Ç–æ–∫–µ–Ω–∞ CES: $3.18 | ‚ÇΩ256.40
‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ
–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ 24—á: -3.58%
–û–±—ä–µ–º –∑–∞ 24—á: $1.17M
```

### –ö—Ä–∞—Å–∏–≤—ã–π –ì—Ä–∞—Ñ–∏–∫:
üì∏ **–ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ** —Å –∫—Ä–∞—Å–∏–≤—ã–º –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º –≥—Ä–∞—Ñ–∏–∫–æ–º:
- üé® –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏
- üìà –¶–≤–µ—Ç–Ω–∞—è –ª–∏–Ω–∏—è (–∑–µ–ª–µ–Ω–∞—è –¥–ª—è —Ä–æ—Å—Ç–∞, –∫—Ä–∞—Å–Ω–∞—è –¥–ª—è –ø–∞–¥–µ–Ω–∏—è)
- üìä –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ü–µ–Ω–∞—Ö –∑–∞ 24 —á–∞—Å–∞
- ‚è∞ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –≤ –º–æ—Å–∫–æ–≤—Å–∫–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üîß –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### ‚úÖ **–ú–∏–Ω–∏–º–∞–ª–∏–∑–º:**
- –¢–æ–ª—å–∫–æ –¥–≤–µ –∫–æ–º–∞–Ω–¥—ã `/start` –∏ `/price`
- –ù–∏–∫–∞–∫–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –∏ —Ä–∞—Å—Å—ã–ª–æ–∫
- –ü—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### ‚úÖ **–ì—Ä–∞—Ñ–∏–∫–∏:**
- –ö—Ä–∞—Å–∏–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ —Ü–≤–µ—Ç–æ–º
- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–∞—è –∑–∞–ª–∏–≤–∫–∞
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∏–Ω–∏–º—É–º–µ –∏ –º–∞–∫—Å–∏–º—É–º–µ

### ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- Webhook —Ä–µ–∂–∏–º —Å self-ping –º–µ—Ö–∞–Ω–∏–∑–º–æ–º
- –ù–µ –∑–∞—Å—ã–ø–∞–µ—Ç –Ω–∞ Render

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π