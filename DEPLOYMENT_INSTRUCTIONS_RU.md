# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞

### –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–æ—à–µ–ª–µ–∫** –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
2. **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á** –∏–∑ MetaMask:
   - –û—Ç–∫—Ä–æ–π—Ç–µ MetaMask
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –º–µ–Ω—é (3 —Ç–æ—á–∫–∏)
   - –í—ã–±–µ—Ä–∏—Ç–µ "Account details"
   - –ù–∞–∂–º–∏—Ç–µ "Export Private Key"
   - –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á

3. **–§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞**: 64 —Å–∏–º–≤–æ–ª–∞ –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ "0x"
   - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: `abc123def456...` (64 —Å–∏–º–≤–æ–ª–∞)
   - ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `0xabc123def456...` (—Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º)
   - ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `abc123...` (—Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π)

### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ—à–µ–ª—å–∫–∞

1. **–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫ MATIC —Ç–æ–∫–µ–Ω–∞–º–∏**:
   - –ú–∏–Ω–∏–º—É–º: 0.1 MATIC –¥–ª—è –≥–∞–∑–∞
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 0.5 MATIC
   - –°–µ—Ç—å: Polygon Mainnet

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å** –≤ MetaMask –∏–ª–∏ PolygonScan

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env —Ñ–∞–π–ª–∞

–û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `.env`:

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–ë–ï–ó –ø—Ä–µ—Ñ–∏–∫—Å–∞ 0x)
ADMIN_PRIVATE_KEY=–≤–∞—à_–ø—Ä–∏–≤–∞—Ç–Ω—ã–π_–∫–ª—é—á_–∑–¥–µ—Å—å

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
CES_TOKEN_ADDRESS=0x1bdf71ede1a4777db1eebe7232bcda20d6fc1610
POLYGON_RPC_URL=https://polygon-rpc.com
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

### –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
```bash
npm run deploy:polygon
```

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:
1. ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ç–∏ Polygon
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ MATIC
3. ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
4. ‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
5. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env
6. ‚úÖ –í–∫–ª—é—á–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —ç—Å–∫—Ä–æ—É

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
üîê Deploying P2P Escrow Contract to Polygon
==========================================

üöÄ Deploying with account: 0xYourAddress
üí∞ Account balance: 0.5 MATIC

üì° Deploying P2PEscrow contract...
‚è≥ Deployment transaction hash: 0x...
‚åõ Waiting for deployment confirmation...

‚úÖ P2PEscrow deployed successfully!
üìã Contract address: 0x...
üîó Transaction hash: 0x...
üëë Contract owner: 0xYourAddress

‚úÖ .env file updated with contract address
‚úÖ USE_SMART_CONTRACT_ESCROW set to true

üéâ Deployment completed successfully!
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º—É:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
node scripts/test-escrow-config.js

# –ü—Ä–æ–≤–µ—Ä–∫–∞ UI –æ–¥–æ–±—Ä–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
node scripts/test-approval-ui.js

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
node scripts/test-secure-p2p-flow.js
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è:
- ‚ùå **–î–æ**: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —ç—Å–∫—Ä–æ—É (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- ‚úÖ **–ü–æ—Å–ª–µ**: –°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç —ç—Å–∫—Ä–æ—É (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

### P2P —Ç–æ—Ä–≥–æ–≤–ª—è —Å—Ç–∞–Ω–µ—Ç:
1. üîí **–§–∏–∑–∏—á–µ—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π** - —Ç–æ–∫–µ–Ω—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ
2. üö´ **–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–±–º–∞–Ω—É—Ç—å** - –¥–∞–∂–µ —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º
3. üëÅÔ∏è **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ–π** - MetaMask –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
4. ‚öñÔ∏è **–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–ø–æ—Ä–æ–≤

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –æ—à–∏–±–∫–∏:

1. **"Private key too short"**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–ª–∏–Ω—É –∫–ª—é—á–∞ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 64 —Å–∏–º–≤–æ–ª–∞)
   - –£–±–µ—Ä–∏—Ç–µ –ø—Ä–µ—Ñ–∏–∫—Å "0x" –µ—Å–ª–∏ –µ—Å—Ç—å

2. **"Insufficient funds"**:
   - –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫ MATIC —Ç–æ–∫–µ–Ω–∞–º–∏
   - –ú–∏–Ω–∏–º—É–º 0.1 MATIC –Ω—É–∂–Ω–æ –¥–ª—è –≥–∞–∑–∞

3. **"Network connection error"**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ POLYGON_RPC_URL –≤ .env
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π RPC

### –ì–æ—Ç–æ–≤—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å?

1. ‚úÖ –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω
2. ‚úÖ –ö–æ—à–µ–ª–µ–∫ –ø–æ–ø–æ–ª–Ω–µ–Ω MATIC
3. ‚úÖ .env —Ñ–∞–π–ª –æ–±–Ω–æ–≤–ª–µ–Ω
4. üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `npm run deploy:polygon`

---

## ‚ö†Ô∏è –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

- üîê **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ–ª–∏—Ç–µ—Å—å** –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º
- üíæ **–°–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é** –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
- üõ°Ô∏è **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ—à–µ–ª–µ–∫** –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- üîç **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç** –Ω–∞ PolygonScan –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è